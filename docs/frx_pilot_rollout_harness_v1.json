{
  "schema_version": "frx.pilot-rollout-harness.v1",
  "bead_id": "bd-mjh3.9.1",
  "generated_by": "bd-mjh3.9.1",
  "generated_at_utc": "2026-02-26T00:00:00Z",
  "track": {
    "id": "FRX-09.1",
    "name": "Pilot App Program and A/B Rollout Harness"
  },
  "pilot_portfolio": {
    "strata": [
      {
        "stratum_id": "low_risk_transactional_dashboard",
        "workload_archetype": "transactional_dashboard",
        "risk_tier": "low",
        "target_share_bps": 3000,
        "inclusion_criteria": [
          "single-page dashboard",
          "bounded mutation graph",
          "no cross-tenant shared writes"
        ],
        "exclusion_criteria": [
          "unbounded background synchronization",
          "security-control-plane surfaces"
        ]
      },
      {
        "stratum_id": "medium_risk_data_sync_optimistic_ui",
        "workload_archetype": "data_sync_optimistic_ui",
        "risk_tier": "medium",
        "target_share_bps": 3000,
        "inclusion_criteria": [
          "optimistic UI with deterministic retry policy",
          "bounded cache invalidation graph"
        ],
        "exclusion_criteria": [
          "cross-region write fanout without replay fixtures"
        ]
      },
      {
        "stratum_id": "high_risk_collaboration_concurrency",
        "workload_archetype": "collaboration_concurrency",
        "risk_tier": "high",
        "target_share_bps": 2000,
        "inclusion_criteria": [
          "multi-actor shared state",
          "documented conflict-resolution strategy",
          "deterministic incident drill coverage"
        ],
        "exclusion_criteria": [
          "known unresolved race-class regressions",
          "missing rollback drill artifacts"
        ]
      },
      {
        "stratum_id": "security_sensitive_admin_policy_control",
        "workload_archetype": "security_sensitive_admin_control",
        "risk_tier": "critical",
        "target_share_bps": 2000,
        "inclusion_criteria": [
          "explicit policy ownership",
          "incident escalation runbooks",
          "signed replay/evidence linkage"
        ],
        "exclusion_criteria": [
          "incomplete oncall readiness",
          "missing artifact integrity attestations"
        ]
      }
    ],
    "stratification_required": true,
    "fail_closed_on_unclassified_workload": true
  },
  "experiment_harness": {
    "modes": [
      "ab_online",
      "shadow_run"
    ],
    "deterministic_assignment_required": true,
    "required_assignment_fields": [
      "assignment_id",
      "cohort_id",
      "variant",
      "propensity_millionths",
      "policy_snapshot_id",
      "seed"
    ],
    "required_observation_fields": [
      "scenario_id",
      "trace_id",
      "latency_us",
      "resource_delta",
      "reward_millionths",
      "loss_millionths",
      "safety_outcome"
    ]
  },
  "off_policy_evaluation": {
    "estimators": [
      "ips",
      "doubly_robust"
    ],
    "propensity_clip_min_millionths": 5000,
    "minimum_effective_sample_size": 500,
    "require_baseline_predictions_for_dr": true,
    "fail_closed_on_missing_propensity": true,
    "fail_closed_on_weight_explosion": true
  },
  "sequential_monitoring": {
    "evidence_mode": "anytime_valid_e_process",
    "decision_actions": [
      "stop",
      "promote",
      "rollback"
    ],
    "thresholds_millionths": {
      "promote_min_confidence": 975000,
      "stop_max_regret": 120000,
      "rollback_incident_delta": 50000,
      "rollback_tail_latency_delta": 80000
    },
    "require_loss_aware_decision_path": true
  },
  "incident_linkage": {
    "required_fields": [
      "trace_id",
      "incident_id",
      "decision_id",
      "replay_bundle_id",
      "evidence_bundle_id",
      "run_manifest_id"
    ],
    "require_replay_bundle": true,
    "require_evidence_bundle": true
  },
  "required_structured_log_fields": [
    "schema_version",
    "scenario_id",
    "trace_id",
    "decision_id",
    "policy_id",
    "component",
    "event",
    "decision_path",
    "seed",
    "timing_us",
    "outcome",
    "error_code"
  ],
  "operator_verification": [
    "./scripts/run_frx_pilot_rollout_harness_suite.sh ci",
    "./scripts/e2e/frx_pilot_rollout_harness_replay.sh ci",
    "jq empty docs/frx_pilot_rollout_harness_v1.json"
  ]
}
