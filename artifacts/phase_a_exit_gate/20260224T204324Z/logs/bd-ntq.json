[
  {
    "id": "bd-ntq",
    "title": "[10.2] VM Core - Comprehensive Execution Epic",
    "description": "## Plan Reference\nSection 10.2 (VM Core). This is the top-level epic for the entire VM Core execution track.\n\n## Purpose\nThe VM Core epic encompasses the fundamental execution engine of FrankenEngine - from source parsing through multi-level IR compilation to baseline interpretation and full ES2020 semantics. This is the architectural spine on which all other subsystems (memory/GC, module system, security, performance optimization) depend.\n\n## Scope and Ambition\nThe VM Core must deliver:\n1. **De novo execution**: No dependency on external JS engine bindings (V8, QuickJS) for core runtime behavior. Both execution lanes are native Rust implementations.\n2. **Full ES2020 semantics**: No permanent subset scope. Every ES2020 feature must be implemented correctly.\n3. **Proof-carrying compilation**: Every IR lowering stage emits machine-checkable witnesses for evidence graph linkage.\n4. **IFC-annotated IR**: Information Flow Control labels are first-class citizens in IR2, enabling deterministic exfiltration prevention.\n5. **Security-proof-guided specialization**: Security proofs serve as optimizer inputs, creating a flywheel where tighter verification yields faster code.\n6. **Verified self-replacement**: Typed execution slots enable incremental convergence from delegate cells to native cells.\n7. **Deterministic replay**: All execution produces witness artifacts (IR4) enabling byte-identical replay.\n8. **TS-first authoring**: TypeScript source is normalized to ES2020-equivalent IR with capability annotations preserved.\n\n## Child Beads (dependency order)\n### Foundation Layer\n- **bd-crp**: Parser trait + canonical AST for ES2020 script/module goals (IR0 foundation)\n- **bd-1wa**: Multi-level IR contract (IR0/IR1/IR2/IR3/IR4) with canonical serialization/hash invariants\n- **bd-20b**: Typed execution-slot registry and ABI contract for verified self-replacement\n\n### Compilation Pipeline\n- **bd-ug9**: Lowering pipelines (IR0→IR1→IR2→IR3) with per-pass verification and witness emission\n- **bd-1fm**: IFC flow-lattice semantics in IR2 (label classes, clearance classes, declassification obligations)\n- **bd-3jg**: Static flow-check pass proving source/sink legality with flow-proof witness artifacts\n- **bd-161**: Proof-to-specialization linkage in IR3/IR4 (security proofs as optimizer inputs)\n\n### Execution Layer\n- **bd-2f8**: Baseline interpreter skeleton for both lanes (QuickJS-inspired-native, V8-inspired-native)\n- **bd-1m9**: Complete ES2020 object/prototype semantics (Proxy, Reflect, property descriptors, no permanent subset)\n- **bd-1k7**: Closure and lexical scope model (lexical scoping, TDZ, scope chain, IFC label propagation)\n- **bd-o8v**: Deterministic Promise jobs/microtask ordering and async semantics\n- **bd-2tx**: Deterministic error/exception semantics with eval error contract\n\n### Front-End\n- **bd-309**: TS front-end normalization contract (TS → ES2020-equivalent IR with capability extraction)\n\n## Exit Gates\n- **Phase A**: Native execution lanes pass baseline conformance (test262 ES2020 subset). All child beads in Foundation and Execution layers must be complete.\n- **Phase B**: Security subsystems active (IFC flow-check, proof-to-specialization linkage). Compilation Pipeline beads must be complete.\n- **Phase C**: >= 3x performance vs Node/Bun. Requires optimization work in 10.6 but depends on correct baselines from this epic.\n\n## Cross-Section Dependencies\n- **Blocks**: 10.3 (Memory + GC), 10.4 (Module + Runtime Surface), 10.5 (Extension Host + Security), 10.6 (Performance Program), 10.7 (Conformance + Verification), 10.10 (FCP-Inspired Hardening), 10.15 (Delta Moonshots)\n- **Blocked by**: nothing (this is the foundational execution track)\n\n## Success Criteria\n1. All child beads complete with artifact-backed acceptance evidence\n2. Both execution lanes produce identical results for identical inputs (determinism invariant)\n3. test262 ES2020 parse/eval conformance meets Phase A exit gate threshold\n4. IR witness artifacts are emitted at every compilation and execution stage\n5. IFC flow labels propagate correctly through the full IR stack\n6. TS-first authoring produces behaviorally equivalent results to tsc+Node baseline\n7. Execution-slot registry supports runtime slot swapping with behavior preservation\n\n## What\nThis bead tracks and executes the scope encoded in its title and mapped plan references as part of the dependency-constrained program graph. It is a first-class execution/governance item, not an informational placeholder.\n\n## Rationale\nThis bead exists to preserve end-to-end plan fidelity, reduce execution ambiguity, and ensure closure decisions are based on deterministic tests, structured evidence, and dependency-correct readiness rather than informal status reporting.\n\n## Parser-frontier integration hardening\n- VM Core closure now explicitly depends on parser-frontier epic closure (`bd-2mds`) in addition to specific parser gate beads.\n- This guarantees no VM-core closure while parser-frontier governance/tasks remain incomplete.\n- Parser-frontier artifacts and e2e diagnostics are mandatory inputs to VM-core evidence review.",
    "acceptance_criteria": "1. All child beads for this epic must be completed with artifact-backed evidence and no unresolved critical blockers.\n2. Parser-frontier program (bd-2mds) and required parser gates (bd-1b70, bd-3rjg, bd-1gfn) must be complete with deterministic evidence before VM-core closure.\n3. Every child implementation bead includes comprehensive unit tests plus deterministic integration and end-to-end scripts validating normal, boundary, failure, and adversarial behavior.\n4. Child test suites assert structured logs for critical events with stable fields including schema_version, trace_id, decision_id, policy_id, component, event, outcome, error_code, replay_command.\n5. Reproducibility artifacts are attached or linked for each closed child (env/manifest, replay/evidence pointers, verification commands, benchmark/check outputs).\n6. Dependency structure remains acyclic, executable in order, and reflective of real sequencing with no false-ready milestones.\n7. Epic closure is allowed only when full plan scope is preserved with documented rollback and fallback behavior.\n8. CPU-intensive Rust build/test/benchmark workflows use documented or executed rch wrappers.",
    "status": "open",
    "priority": 0,
    "issue_type": "epic",
    "created_at": "2026-02-20T07:32:18.302155218Z",
    "created_by": "ubuntu",
    "updated_at": "2026-02-24T07:43:17.986287630Z",
    "source_repo": ".",
    "compaction_level": 0,
    "original_size": 0,
    "labels": [
      "execution-epic",
      "plan",
      "section-10-2"
    ],
    "dependencies": [
      {
        "id": "bd-1b70",
        "title": "[PARSER-ORACLE] Semantic equivalence + metamorphic proof gate",
        "status": "in_progress",
        "priority": 0,
        "dependency_type": "blocks"
      },
      {
        "id": "bd-2mds",
        "title": "Epic: Parser Frontier Program (active)",
        "status": "in_progress",
        "priority": 0,
        "dependency_type": "blocks"
      },
      {
        "id": "bd-crp",
        "title": "[10.2] Define parser trait + canonical AST invariants for ES2020 script/module goals.",
        "status": "closed",
        "priority": 0,
        "dependency_type": "parent-child"
      },
      {
        "id": "bd-3vh",
        "title": "[10.10] FCP-Inspired Hardening + Interop Track - Comprehensive Execution Epic",
        "status": "closed",
        "priority": 0,
        "dependency_type": "blocks"
      },
      {
        "id": "bd-3rjg",
        "title": "[PARSER-PHASE-3.5] Parallel parsing interference + determinism gate",
        "status": "open",
        "priority": 1,
        "dependency_type": "blocks"
      },
      {
        "id": "bd-1gfn",
        "title": "[PARSER-PHASE-4] Mathematical Error Recovery (Bayesian Diagnostics)",
        "status": "open",
        "priority": 1,
        "dependency_type": "blocks"
      },
      {
        "id": "bd-1g1n",
        "title": "[10.2] Define typed execution-slot registry and ABI contract for slot replacement",
        "status": "closed",
        "priority": 1,
        "dependency_type": "parent-child"
      },
      {
        "id": "bd-309",
        "title": "[10.2] Implement TS-front-end normalization contract proving TS authoring lowers to ES2020-equivalent behavior before runtime.",
        "status": "closed",
        "priority": 1,
        "dependency_type": "parent-child"
      },
      {
        "id": "bd-o8v",
        "title": "[10.2] Implement deterministic Promise jobs/microtask ordering and async semantics.",
        "status": "closed",
        "priority": 1,
        "dependency_type": "parent-child"
      },
      {
        "id": "bd-1k7",
        "title": "[10.2] Implement closure and lexical scope model.",
        "status": "closed",
        "priority": 1,
        "dependency_type": "parent-child"
      },
      {
        "id": "bd-1m9",
        "title": "[10.2] Implement complete ES2020 object/prototype semantics (no permanent subset scope).",
        "status": "closed",
        "priority": 1,
        "dependency_type": "parent-child"
      },
      {
        "id": "bd-20b",
        "title": "[10.2] Define typed execution-slot registry and ABI contract for slot replacement (`slot_id`, semantic boundary, authority envelope, promotion status).",
        "status": "closed",
        "priority": 1,
        "dependency_type": "parent-child"
      },
      {
        "id": "bd-161",
        "title": "[10.2] Define proof-to-specialization linkage in IR contracts (`proof_input_ids`, `optimization_class`, `validity_epoch`, `rollback_token`) for IR3/IR4 artifacts.",
        "status": "closed",
        "priority": 1,
        "dependency_type": "parent-child"
      },
      {
        "id": "bd-3jg",
        "title": "[10.2] Implement static flow-check pass proving source/sink legality and emitting flow-proof witness artifacts.",
        "status": "in_progress",
        "priority": 1,
        "dependency_type": "parent-child"
      },
      {
        "id": "bd-1fm",
        "title": "[10.2] Define IFC flow-lattice semantics (`label classes`, `clearance classes`, `declassification obligations`) in `IR2`.",
        "status": "closed",
        "priority": 1,
        "dependency_type": "parent-child"
      },
      {
        "id": "bd-ug9",
        "title": "[10.2] Implement lowering pipelines with per-pass verification and witness emission.",
        "status": "closed",
        "priority": 1,
        "dependency_type": "parent-child"
      },
      {
        "id": "bd-1wa",
        "title": "[10.2] Define multi-level IR contract (`IR0`/`IR1`/`IR2`/`IR3`/`IR4`) including canonical serialization/hash invariants.",
        "status": "closed",
        "priority": 1,
        "dependency_type": "parent-child"
      },
      {
        "id": "bd-2tx",
        "title": "[10.2] Implement deterministic error and exception semantics (including eval routing-reason metadata).",
        "status": "closed",
        "priority": 1,
        "dependency_type": "parent-child"
      },
      {
        "id": "bd-2f8",
        "title": "[10.2] Implement baseline interpreter skeleton for both lanes.",
        "status": "closed",
        "priority": 2,
        "dependency_type": "parent-child"
      }
    ],
    "dependents": [
      {
        "id": "bd-1pi9",
        "title": "[TEST] Comprehensive unit test suite for franken-engine crate",
        "status": "open",
        "priority": 1,
        "dependency_type": "blocks"
      },
      {
        "id": "bd-1csl",
        "title": "[PHASE-A] Native VM Substrate Exit Gate",
        "status": "open",
        "priority": 1,
        "dependency_type": "blocks"
      },
      {
        "id": "bd-20c",
        "title": "[10.0] Top-10 #1: TS-first capability-typed IR execution (strategy: `9A.1`; deep semantics: `9F.4`; execution owners: `10.2`, `10.5`, `10.12`).",
        "status": "open",
        "priority": 1,
        "dependency_type": "blocks"
      },
      {
        "id": "bd-1yq",
        "title": "[10.5] Extension Host + Security - Comprehensive Execution Epic",
        "status": "open",
        "priority": 1,
        "dependency_type": "blocks"
      },
      {
        "id": "bd-ntq.1",
        "title": "[10.2] Implement deterministic error and exception semantics",
        "status": "closed",
        "priority": 2,
        "dependency_type": "parent-child"
      },
      {
        "id": "bd-25sh",
        "title": "[13] Track and validate program success criteria (acceptance gates).",
        "status": "open",
        "priority": 2,
        "dependency_type": "blocks"
      },
      {
        "id": "bd-1tsf",
        "title": "[MASTER] Execute PLAN 10.x end-to-end with full dependency graph",
        "status": "open",
        "priority": 3,
        "dependency_type": "parent-child"
      },
      {
        "id": "bd-3q9",
        "title": "[10.15] Delta Moonshots Execution Track (9I) - Comprehensive Execution Epic",
        "status": "open",
        "priority": 3,
        "dependency_type": "blocks"
      },
      {
        "id": "bd-383",
        "title": "[10.7] Conformance + Verification - Comprehensive Execution Epic",
        "status": "open",
        "priority": 3,
        "dependency_type": "blocks"
      },
      {
        "id": "bd-12m",
        "title": "[10.6] Performance Program - Comprehensive Execution Epic",
        "status": "open",
        "priority": 3,
        "dependency_type": "blocks"
      },
      {
        "id": "bd-3ch",
        "title": "[10.4] Module + Runtime Surface - Comprehensive Execution Epic",
        "status": "open",
        "priority": 3,
        "dependency_type": "blocks"
      },
      {
        "id": "bd-3vk",
        "title": "[10.3] Memory + GC - Comprehensive Execution Epic",
        "status": "open",
        "priority": 3,
        "dependency_type": "blocks"
      }
    ],
    "parent": "bd-161"
  }
]
